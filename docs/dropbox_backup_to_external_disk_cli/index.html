<!DOCTYPE html>
<html lang="en">
<head>
  <meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.6.0">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="rustdoc">
  <meta name="description" content="dropbox_backup_to_external_disk_cli">
  <title>dropbox_backup_to_external_disk_cli - Rust</title>
  <link rel="preload" as="font" type="font/woff2" crossorigin="" href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin="" href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin="" href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin="" href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin="" href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2">
  <link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css">
  <link rel="stylesheet" href="../static.files/rustdoc-ac92e1bbe349e143.css">
  <meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="dropbox_backup_to_external_disk_cli" data-themes=
  "" data-resource-suffix="" data-rustdoc-version="1.76.0 (07dca489a 2024-02-04)" data-channel="1.76.0" data-search-js="search-2b6ce74ff89ae146.js"
  data-settings-js="settings-4313503d2e1961c2.js">
  <script src="../static.files/storage-f2adc0d6ca4d09fb.js"></script>
  <script defer src="../crates.js"></script>
  <script defer src="../static.files/main-305769736d49e732.js"></script><noscript>
  <link rel="stylesheet" href="../static.files/noscript-feafe1bb7466e4bd.css"></noscript>
  <link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png">
  <link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png">
  <link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg">
</head>
<body class="rustdoc mod crate">
  <!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]-->
  <nav class="mobile-topbar">
    <button class="sidebar-menu-toggle">â˜°</button>
  </nav>
  <nav class="sidebar">
    <div class="sidebar-crate">
      <h2><a href="../dropbox_backup_to_external_disk_cli/index.html">dropbox_backup_to_external_disk_cli</a><span class="version">2023.1222.2326</span></h2>
    </div>
    <div class="sidebar-elems">
      <ul class="block">
        <li>
          <a id="all-types" href="all.html">All Items</a>
        </li>
      </ul>
      <section>
        <ul class="block">
          <li>
            <a href="#modules">Modules</a>
          </li>
          <li>
            <a href="#functions">Functions</a>
          </li>
        </ul>
      </section>
    </div>
  </nav>
  <div class="sidebar-resizer"></div>
  <main>
    <div class="width-limiter">
      <nav class="sub">
        <form class="search-form">
          <div id="sidebar-button" tabindex="-1">
            <a href="../dropbox_backup_to_external_disk_cli/all.html" title="show sidebar"></a>
          </div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder=
          "Click or press â€˜Sâ€™ to search, â€˜?â€™ for more optionsâ€¦" type="search">
          <div id="help-button" tabindex="-1">
            <a href="../help.html" title="help">?</a>
          </div>
          <div id="settings-menu" tabindex="-1">
            <a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a>
          </div>
        </form>
      </nav>
      <section id="main-content" class="content">
        <div class="main-heading">
          <h1>Crate <a class="mod" href="#">dropbox_backup_to_external_disk_cli</a><button id="copy-path" title="Copy item path to clipboard"><img src=
          "../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src"
          href="../src/dropbox_backup_to_external_disk_cli/main.rs.html#8-748">source</a> Â· <button id="toggle-all-docs" title=
          "collapse all docs">[<span>âˆ’</span>]</button></span>
        </div>
        <details class="toggle top-doc" open="">
          <summary class="hideme">
            <span>Expand description</span>
          </summary>
          <div class="docblock">
            <h2 id="dropbox_backup_to_external_disk_cli"><a href="#dropbox_backup_to_external_disk_cli">dropbox_backup_to_external_disk_cli</a></h2>
            <p><strong>One way sync from dropbox to external disc</strong><br>
            <em><strong>version: 2023.1222.2326 date: 2024-02-18 author: <a href="https://bestia.dev">bestia.dev</a> repository: <a href=
            "https://github.com/bestia-dev/dropbox_backup_to_external_disk_cli/">GitHub</a></strong></em></p>
            <p><img src="https://img.shields.io/badge/maintained-green" alt="status"> <img src="https://img.shields.io/badge/work_in_progress-yellow" alt=
            "status"></p>
            <p><a href="https://github.com/bestia-dev/dropbox_backup_to_external_disk_cli/"><img src="https://img.shields.io/badge/Lines_in_Rust-670-green.svg"
            alt="Lines in Rust code"></a> <a href="https://github.com/bestia-dev/dropbox_backup_to_external_disk_cli/"><img src=
            "https://img.shields.io/badge/Lines_in_Doc_comments-36-blue.svg" alt="Lines in Doc comments"></a> <a href=
            "https://github.com/bestia-dev/dropbox_backup_to_external_disk_cli/"><img src="https://img.shields.io/badge/Lines_in_comments-115-purple.svg" alt=
            "Lines in Comments"></a> <a href="https://github.com/bestia-dev/dropbox_backup_to_external_disk_cli/"><img src=
            "https://img.shields.io/badge/Lines_in_examples-0-yellow.svg" alt="Lines in examples"></a> <a href=
            "https://github.com/bestia-dev/dropbox_backup_to_external_disk_cli/"><img src="https://img.shields.io/badge/Lines_in_tests-0-orange.svg" alt=
            "Lines in tests"></a></p>
            <p><a href="https://github.com/bestia-dev/dropbox_backup_to_external_disk_2/blob/main/LICENSE"><img src=
            "https://img.shields.io/badge/license-MIT-blue.svg" alt="License"></a> <a href=
            "https://github.com/bestia-dev/dropbox_backup_to_external_disk_2/"><img src=
            "https://github.com/bestia-dev/dropbox_backup_to_external_disk_2/workflows/RustAction/badge.svg" alt="Rust"></a> <img src=
            "https://bestia.dev/webpage_hit_counter/get_svg_image/584868797.svg" alt="Hits"></p>
            <p>Hashtags: #rustlang #tutorial #dropbox #cli #tui<br>
            My projects on Github are more like a tutorial than a finished product: <a href="https://github.com/bestia-dev/tutorials_rust_wasm">bestia-dev
            tutorials</a>.</p>
            <h3 id="cli"><a href="#cli">CLI</a></h3>
            <p>This compiles into a CLI binary executable. All the user interface is inside this project.<br>
            The main dependency is to the library project <code>dropbox_backup_to_external_disk_lib</code> that contains all the program logic. I separated
            this projects to show how to use the same library from different binary projects. It is difficult to separate this two layers afterwards. They
            should be separated from the start.<br>
            Different user-interfaces need different workflows and the common library must allow this. Modern computers and phones are all multi-core. Even
            javascript has multi-thread capabilities with web-workers. It is recommended to create multi-threaded applications. Most of the calls to the
            library will be done in a separate thread to have the possibility of communication between the 2 layers (UI and logic). For example for progress
            bars and similar long running tasks.</p>
            <h3 id="development"><a href="#development">Development</a></h3>
            <p>I use cargo-auto to write all repetitive tasks in automation_tasks_rs.</p>
            <h3 id="try-it"><a href="#try-it">Try it</a></h3>
            <p>There are a few manual steps for the security of you files on Dropbox. Authentication on internet is a complex topic.<br>
            You should be logged in Linux terminal (also in WSL2) with your account. So things you do in that session, are not visible to others. You will set
            some local environment variables that are private/secret to your linux Session. After you logout from you Linux session these local environment
            variables will be deleted.<br>
            The executable will create a sub-directory <code>temp_data</code> in the current directory. Maybe it is best if you create a dedicated directory
            <code>~/dropbox_backup_to_external_disk_cli/</code> just for this executable and temp_data. Download the latest release from <a href=
            "https://github.com/bestia-dev/dropbox_backup_to_external_disk_lib/releases">Github</a> and make the file executable and enable
            auto-completion:</p>
            <div class="example-wrap">
              <pre class="language-bash"><code>cd ~
mkdir dropbox_backup_to_external_disk_cli
cd dropbox_backup_to_external_disk_cli

curl -L https://github.com/bestia-dev/dropbox_backup_to_external_disk_lib/releases/latest/download/dropbox_backup_to_external_disk_cli --output dropbox_backup_to_external_disk_cli

chmod +x dropbox_backup_to_external_disk_cli
alias dropbox_backup_to_external_disk_cli=./dropbox_backup_to_external_disk_cli
complete -C "dropbox_backup_to_external_disk_cli completion" dropbox_backup_to_external_disk_cli

dropbox_backup_to_external_disk_cli
</code></pre>
            </div>
            <p>Run the executable without arguments and follow carefully the instructions.</p>
            <h3 id="warning"><a href="#warning">Warning</a></h3>
            <p>I donâ€™t know why, but WSL2 sometimes does not see all the folders of the external disk.<br>
            Instead of 12.000 folders it sees only 28 ???<br>
            Be careful !<br>
            Check it first with this commands to see if the removable disk is really mounted or you see a phantom cached file system.</p>
            <div class="example-wrap">
              <pre class="language-bash"><code>ls /mnt/d
# and/or
df
</code></pre>
            </div>
            <p>I then restart my Win10 and the problem magically disappears.</p>
            <h3 id="bash-auto-completion"><a href="#bash-auto-completion">bash auto-completion</a></h3>
            <p>This executable is prepared for auto-completion in bash.<br>
            Run this command to define auto-completion in bash for the current session:</p>
            <div class="example-wrap">
              <pre class="language-bash"><code>alias dropbox_backup_to_external_disk_cli=./dropbox_backup_to_external_disk_cli
complete -C "dropbox_backup_to_external_disk_cli completion" dropbox_backup_to_external_disk_cli
</code></pre>
            </div>
            <p>To make it permanent add this command to the file <code>~/.bashrc</code> or some other file that runs commands on bash initialization.</p>
            <h3 id="authorization-oauth2"><a href="#authorization-oauth2">Authorization OAuth2</a></h3>
            <p>Authorization on the internet is a mess. Dropbox api uses OAuth2. Every app must be authorized on Dropbox and have its own <code>app key</code>
            and <code>app secret</code>.<br>
            For commercial programs they probably embed them into the binary code somehow. But for OpenSource projects it is not possible to keep a secret. So
            the workaround is: every user must create its own new <code>dropbox app</code> exclusive only to him. Creating a new app is simple. This app will
            stay forever in <code>development status</code> in dropbox, to be more private and secure. The<br>
            <code>$ dropbox_backup_to_external_disk_cli --help</code><br>
            has the detailed instructions.<br>
            Then every time before use we need generate the â€œshort-lived access tokenâ€ for security reasons. There is the possibility to choose â€œno expirationâ€
            token, but I donâ€™t like it. Dropbox backup is used rarely and it is not super frustrating to make few clicks for security of your precious files.
            Having a â€œno expirationâ€ token is like having another password for the hackers to try to hack. I like more the â€œshort-livedâ€ token. When Iâ€™m not
            using this backup program, there is no access token at all.<br>
            <img src="https://github.com/bestia-dev/dropbox_backup_to_external_disk_lib/raw/main/images/dropbox_2.png" alt="dropbox_2" title="dropbox_2">
            <img src="https://github.com/bestia-dev/dropbox_backup_to_external_disk_lib/raw/main/images/dropbox_1.png" alt="dropbox_1" title="dropbox_1"> Use
            this command to store the token (encrypted) in env variable. It will ask for your interactive input like a secret password.</p>
            <div class="example-wrap">
              <pre class="language-bash"><code>dropbox_backup_to_external_disk_cli encode_token
</code></pre>
            </div>
            <h3 id="open-source-and-free-as-a-beer"><a href="#open-source-and-free-as-a-beer">Open-source and free as a beer</a></h3>
            <p>My open-source projects are free as a beer (MIT license).<br>
            I just love programming.<br>
            But I need also to drink. If you find my projects and tutorials helpful, please buy me a beer by donating to my <a href=
            "https://paypal.me/LucianoBestia">PayPal</a>.<br>
            You know the price of a beer in your local bar ;-)<br>
            So I can drink a free beer for your health :-)<br>
            <a href="https://translate.google.com/?hl=en&amp;sl=sl&amp;tl=en&amp;text=Na%20zdravje&amp;op=translate">Na zdravje!</a> <a href=
            "https://dictionary.cambridge.org/dictionary/italian-english/alla-salute">Alla salute!</a> <a href=
            "https://dictionary.cambridge.org/dictionary/german-english/prost">Prost!</a> <a href=
            "https://matadornetwork.com/nights/how-to-say-cheers-in-50-languages/">Nazdravlje!</a> ğŸ»</p>
            <p><a href="https://bestia.dev">//bestia.dev</a><br>
            <a href="https://github.com/bestia-dev">//github.com/bestia-dev</a><br>
            <a href="https://bestiadev.substack.com">//bestiadev.substack.com</a><br>
            <a href="https://youtube.com/@bestia-dev-tutorials">//youtube.com/@bestia-dev-tutorials</a></p>
          </div>
        </details>
        <h2 id="modules" class="section-header"><a href="#modules">Modules</a></h2>
        <ul class="item-table">
          <li>
            <div class="item-name">
              <a class="mod" href="app_state_mod/index.html" title="mod dropbox_backup_to_external_disk_cli::app_state_mod">app_state_mod</a><span title=
              "Restricted Visibility">&nbsp;ğŸ”’</span>
            </div>
          </li>
          <li>
            <div class="item-name">
              <a class="mod" href="crossterm_cli_mod/index.html" title=
              "mod dropbox_backup_to_external_disk_cli::crossterm_cli_mod">crossterm_cli_mod</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span>
            </div>
            <div class="desc docblock-short">
              CLI interface using the crossterm crate
            </div>
          </li>
        </ul>
        <h2 id="functions" class="section-header"><a href="#functions">Functions</a></h2>
        <ul class="item-table">
          <li>
            <div class="item-name">
              <a class="fn" href="fn.all_list.html" title="fn dropbox_backup_to_external_disk_cli::all_list">all_list</a><span title=
              "Restricted Visibility">&nbsp;ğŸ”’</span>
            </div>
            <div class="desc docblock-short">
              list local and remote in a multiple threads, then receive messages to print on screen
            </div>
          </li>
          <li>
            <div class="item-name">
              <a class="fn" href="fn.argument_router.html" title="fn dropbox_backup_to_external_disk_cli::argument_router">argument_router</a><span title=
              "Restricted Visibility">&nbsp;ğŸ”’</span>
            </div>
            <div class="desc docblock-short">
              look at the arguments and route to appropriate function
            </div>
          </li>
          <li>
            <div class="item-name">
              <a class="fn" href="fn.check_and_save_ext_disk_base_path.html" title=
              "fn dropbox_backup_to_external_disk_cli::check_and_save_ext_disk_base_path">check_and_save_ext_disk_base_path</a><span title=
              "Restricted Visibility">&nbsp;ğŸ”’</span>
            </div>
            <div class="desc docblock-short">
              check if external disk base path exists and then saves the base local path for later use like â€œ/mnt/e/DropBoxBackup2â€
            </div>
          </li>
          <li>
            <div class="item-name">
              <a class="fn" href="fn.compare_files.html" title="fn dropbox_backup_to_external_disk_cli::compare_files">compare_files</a><span title=
              "Restricted Visibility">&nbsp;ğŸ”’</span>
            </div>
            <div class="desc docblock-short">
              compare files
            </div>
          </li>
          <li>
            <div class="item-name">
              <a class="fn" href="fn.compare_folders.html" title="fn dropbox_backup_to_external_disk_cli::compare_folders">compare_folders</a><span title=
              "Restricted Visibility">&nbsp;ğŸ”’</span>
            </div>
            <div class="desc docblock-short">
              compare folders
            </div>
          </li>
          <li>
            <div class="item-name">
              <a class="fn" href="fn.completion.html" title="fn dropbox_backup_to_external_disk_cli::completion">completion</a><span title=
              "Restricted Visibility">&nbsp;ğŸ”’</span>
            </div>
            <div class="desc docblock-short">
              sub-command for bash auto-completion of <code>cargo auto</code> using the crate <code>dev_bestia_cargo_completion</code> <code>complete -C
              "dropbox_backup_to_external_disk_cli completion" dropbox_backup_to_external_disk_cli</code> <code>complete -p</code> - shows all the completion
              commands <code>complete -r xxx</code> - deletes a completion command
            </div>
          </li>
          <li>
            <div class="item-name">
              <a class="fn" href="fn.create_folders.html" title="fn dropbox_backup_to_external_disk_cli::create_folders">create_folders</a><span title=
              "Restricted Visibility">&nbsp;ğŸ”’</span>
            </div>
          </li>
          <li>
            <div class="item-name">
              <a class="fn" href="fn.download_from_list.html" title=
              "fn dropbox_backup_to_external_disk_cli::download_from_list">download_from_list</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span>
            </div>
          </li>
          <li>
            <div class="item-name">
              <a class="fn" href="fn.download_one_file.html" title=
              "fn dropbox_backup_to_external_disk_cli::download_one_file">download_one_file</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span>
            </div>
          </li>
          <li>
            <div class="item-name">
              <a class="fn" href="fn.empty_lists_compared.html" title="fn dropbox_backup_to_external_disk_cli::empty_lists_compared">empty_lists_compared</a>
            </div>
            <div class="desc docblock-short">
              empty lists created by compare
            </div>
          </li>
          <li>
            <div class="item-name">
              <a class="fn" href="fn.get_ext_disk_base_path.html" title=
              "fn dropbox_backup_to_external_disk_cli::get_ext_disk_base_path">get_ext_disk_base_path</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span>
            </div>
            <div class="desc docblock-short">
              read ext_disk_base_path from file path_list_ext_disk_base_path
            </div>
          </li>
          <li>
            <div class="item-name">
              <a class="fn" href="fn.local_list.html" title="fn dropbox_backup_to_external_disk_cli::local_list">local_list</a><span title=
              "Restricted Visibility">&nbsp;ğŸ”’</span>
            </div>
            <div class="desc docblock-short">
              list in a new thread, then receive messages to print on screen
            </div>
          </li>
          <li>
            <div class="item-name">
              <a class="fn" href="fn.main.html" title="fn dropbox_backup_to_external_disk_cli::main">main</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span>
            </div>
          </li>
          <li>
            <div class="item-name">
              <a class="fn" href="fn.main_with_catch_errors.html" title=
              "fn dropbox_backup_to_external_disk_cli::main_with_catch_errors">main_with_catch_errors</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span>
            </div>
          </li>
          <li>
            <div class="item-name">
              <a class="fn" href="fn.move_or_rename_local_files.html" title=
              "fn dropbox_backup_to_external_disk_cli::move_or_rename_local_files">move_or_rename_local_files</a><span title=
              "Restricted Visibility">&nbsp;ğŸ”’</span>
            </div>
          </li>
          <li>
            <div class="item-name">
              <a class="fn" href="fn.print_help.html" title="fn dropbox_backup_to_external_disk_cli::print_help">print_help</a><span title=
              "Restricted Visibility">&nbsp;ğŸ”’</span>
            </div>
            <div class="desc docblock-short">
              print help
            </div>
          </li>
          <li>
            <div class="item-name">
              <a class="fn" href="fn.read_only_remove.html" title="fn dropbox_backup_to_external_disk_cli::read_only_remove">read_only_remove</a><span title=
              "Restricted Visibility">&nbsp;ğŸ”’</span>
            </div>
            <div class="desc docblock-short">
              The backup files must not be readonly to allow copying the modified file from the remote.
            </div>
          </li>
          <li>
            <div class="item-name">
              <a class="fn" href="fn.remote_list.html" title="fn dropbox_backup_to_external_disk_cli::remote_list">remote_list</a><span title=
              "Restricted Visibility">&nbsp;ğŸ”’</span>
            </div>
          </li>
          <li>
            <div class="item-name">
              <a class="fn" href="fn.spawn_list_local.html" title="fn dropbox_backup_to_external_disk_cli::spawn_list_local">spawn_list_local</a><span title=
              "Restricted Visibility">&nbsp;ğŸ”’</span>
            </div>
          </li>
          <li>
            <div class="item-name">
              <a class="fn" href="fn.spawn_list_remote.html" title=
              "fn dropbox_backup_to_external_disk_cli::spawn_list_remote">spawn_list_remote</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span>
            </div>
          </li>
          <li>
            <div class="item-name">
              <a class="fn" href="fn.trash_files.html" title="fn dropbox_backup_to_external_disk_cli::trash_files">trash_files</a><span title=
              "Restricted Visibility">&nbsp;ğŸ”’</span>
            </div>
          </li>
          <li>
            <div class="item-name">
              <a class="fn" href="fn.trash_folders.html" title="fn dropbox_backup_to_external_disk_cli::trash_folders">trash_folders</a><span title=
              "Restricted Visibility">&nbsp;ğŸ”’</span>
            </div>
          </li>
          <li>
            <div class="item-name">
              <a class="fn" href="fn.ui_encode_token.html" title="fn dropbox_backup_to_external_disk_cli::ui_encode_token">ui_encode_token</a><span title=
              "Restricted Visibility">&nbsp;ğŸ”’</span>
            </div>
            <div class="desc docblock-short">
              Ask the user to paste the token interactively and press Enter. Then calculate the master_key and the token_enc. I need to store the token
              somewhere because the CLI can be executed many times sequentially. The result of the function must be correct bash commands. They must be
              executed in the current shell and not in a sub-shell. This command should be executed with <code>eval $(dropbox_backup_to_external_disk_cli
              encode_token)</code> to store the env var in the current shell. Similar to how works <code>eval $(ssh-agent)</code>
            </div>
          </li>
          <li>
            <div class="item-name">
              <a class="fn" href="fn.ui_test_connection.html" title=
              "fn dropbox_backup_to_external_disk_cli::ui_test_connection">ui_test_connection</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span>
            </div>
            <div class="desc docblock-short">
              ui_test_connection
            </div>
          </li>
        </ul>
      </section>
    </div>
  </main>
</body>
</html>
